# Streamlit UI Design for Sanskrit Analyzer

**Date:** 2026-02-02
**Status:** Approved
**PRD:** `tasks/prd-streamlit-ui.md`

## Overview

A Streamlit-based web UI for the Sanskrit Analyzer that provides an intuitive, folder-expansion style interface for exploring sentence parse trees. The UI connects to the existing FastAPI backend.

## Design Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| Use case | Flexible (Educational/Research/Quick) | Serve multiple user types |
| Tree view | Hybrid (tabs + expanders) | Clean separation of concerns |
| Parse comparison | Ranked list + on-demand diff | Simple by default, powerful when needed |
| Word details | Adaptive (minimal + "Show more") | Reduces cognitive load |
| Input layout | Split (input left, examples/history right) | Helps new and returning users |
| Backend | API via HTTP | Decoupled, deployable separately |
| Styling | Minimal/clean | Focus on content |

## Layout

### Overall Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sanskrit Analyzer                              [Mode: v]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Enter Sanskrit text:        â”‚ â”‚ Examples:                  â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â€¢ à¤°à¤¾à¤®à¤ƒ à¤—à¤šà¥à¤›à¤¤à¤¿            â”‚ â”‚
â”‚  â”‚ â”‚                         â”‚ â”‚ â”‚  â€¢ à¤…à¤¹à¤‚ à¤ªà¤ à¤¾à¤®à¤¿              â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â€¢ à¤¸à¤ƒ à¤ªà¥à¤¸à¥à¤¤à¤•à¤‚ à¤ªà¤ à¤¤à¤¿        â”‚ â”‚
â”‚  â”‚ [Analyze]                   â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚ History:                   â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚  â€¢ (recent queries...)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RESULTS AREA                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Sentence: à¤°à¤¾à¤®à¤ƒ à¤—à¤šà¥à¤›à¤¤à¤¿    Confidence: 94%    [Compare]       â”‚â”‚
â”‚  â”‚ Scripts: à¤°à¤¾à¤®à¤ƒ à¤—à¤šà¥à¤›à¤¤à¤¿ | rÄmaá¸¥ gacchati | rAmaH gacCati       â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ Parse Candidates (ranked by confidence):                    â”‚â”‚
â”‚  â”‚  â–¸ Parse 1 (94%) - à¤°à¤¾à¤®à¤ƒ + à¤—à¤šà¥à¤›à¤¤à¤¿  â† selected               â”‚â”‚
â”‚  â”‚  â–¸ Parse 2 (78%) - à¤°à¤¾à¤® + à¤…à¤ƒ + à¤—à¤šà¥à¤›à¤¤à¤¿                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Parse Tree Expansion (Folder View)

```
â–¼ Parse 1 (94%) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [Selected]
â”‚
â”œâ”€â–¼ SandhiGroup: "à¤°à¤¾à¤®à¤ƒ"
â”‚  â”‚
â”‚  â””â”€â–¼ à¤°à¤¾à¤® (rÄma)
â”‚      â”œâ”€ Noun, Masculine, Singular, Nominative
â”‚      â”œâ”€ "Rama, hero of the Ramayana"
â”‚      â””â”€ [Show more...]
â”‚
â”œâ”€â–¼ SandhiGroup: "à¤—à¤šà¥à¤›à¤¤à¤¿"
â”‚  â”‚
â”‚  â””â”€â–¼ à¤—à¤šà¥à¤›à¤¤à¤¿ (gacchati)
â”‚      â”œâ”€ Verb, 3rd Person, Singular, Present
â”‚      â”œâ”€ "goes, walks, moves"
â”‚      â”œâ”€ âˆšà¤—à¤®à¥ (gam) - "to go"
â”‚      â””â”€ [Show more...]

â–¸ Parse 2 (78%) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [Click to expand]
```

### Word Card (Expanded)

```
â””â”€â–¼ à¤°à¤¾à¤® (rÄma)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ MORPHOLOGY                                            â”‚
    â”‚   POS: Noun  â”‚  Gender: Masculine  â”‚  Number: Singularâ”‚
    â”‚   Case: Nominative (à¤ªà¥à¤°à¤¥à¤®à¤¾ à¤µà¤¿à¤­à¤•à¥à¤¤à¤¿)                    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ SCRIPTS                                               â”‚
    â”‚   à¤¦à¥‡à¤µà¤¨à¤¾à¤—à¤°à¥€: à¤°à¤¾à¤®  â”‚  IAST: rÄma  â”‚  SLP1: rAma         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ MEANINGS                                              â”‚
    â”‚   1. Rama, hero of the Ramayana                       â”‚
    â”‚   2. pleasing, delightful                             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ CONFIDENCE: 96%  â”‚  ENGINE VOTES: Vidyut âœ“ Dharmamitra âœ“â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    [Show less]
```

### Diff Comparison View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Comparing Parse 1 vs Parse 2:                          [Close] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Parse 1 (94%)              â”‚ Parse 2 (78%)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ à¤°à¤¾à¤®à¤ƒ â†’ à¤°à¤¾à¤® (noun, nom.)    â”‚ à¤°à¤¾à¤®à¤ƒ â†’ ğŸ”¶ à¤°à¤¾à¤® + à¤…à¤ƒ (noun + interj.)â”‚
â”‚ à¤—à¤šà¥à¤›à¤¤à¤¿ â†’ à¤—à¤šà¥à¤›à¤¤à¤¿ (verb)     â”‚ à¤—à¤šà¥à¤›à¤¤à¤¿ â†’ à¤—à¤šà¥à¤›à¤¤à¤¿ (verb)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ğŸ”¶ = differs from selected parse
```

## Component Architecture

```
app.py (main)
    â”œâ”€â”€ input_panel.py
    â”‚   â”œâ”€â”€ text_input()
    â”‚   â”œâ”€â”€ examples_list()
    â”‚   â””â”€â”€ history_list()
    â”œâ”€â”€ results_header.py
    â”‚   â”œâ”€â”€ sentence_display()
    â”‚   â”œâ”€â”€ confidence_badge()
    â”‚   â””â”€â”€ script_variants()
    â”œâ”€â”€ parse_tree.py
    â”‚   â”œâ”€â”€ parse_list()
    â”‚   â”œâ”€â”€ sandhi_group()
    â”‚   â””â”€â”€ tree_node()
    â”œâ”€â”€ word_card.py
    â”‚   â”œâ”€â”€ minimal_view()
    â”‚   â””â”€â”€ expanded_view()
    â”œâ”€â”€ diff_view.py
    â”‚   â”œâ”€â”€ comparison_columns()
    â”‚   â””â”€â”€ diff_highlight()
    â”œâ”€â”€ api_client.py
    â”‚   â”œâ”€â”€ analyze()
    â”‚   â””â”€â”€ health_check()
    â”œâ”€â”€ state.py
    â”‚   â”œâ”€â”€ get_history()
    â”‚   â”œâ”€â”€ add_to_history()
    â”‚   â””â”€â”€ clear_history()
    â””â”€â”€ styles.py
        â””â”€â”€ inject_css()
```

## Error Messages

| Error Type | Message |
|------------|---------|
| Connection refused | "Cannot connect to API server. Ensure the backend is running at {url}" |
| Timeout | "Request timed out. The server may be overloaded. Try again in a moment." |
| 4xx | Display API error message from response body |
| 5xx | "Server error occurred. Please try again or check server logs." |

## Testing Strategy

- **Unit tests:** API client, state management, component logic
- **Integration tests:** Full analysis flow with mocked API
- **Manual verification:** Visual appearance in browser

## Open Questions

1. Should we add a "Copy to clipboard" button for results?
2. Should examples be hardcoded or fetched from the API?
3. Do we need a health check indicator in the UI header showing API status?
